add dependencies to the modules logic.
also make sure that all the methods in the module return if the module is disabled

make modules should have
dependants[] // for propogating disabling
prerequisites[] // for enabling